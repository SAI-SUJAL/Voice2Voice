# llm_groq.py

from groq import Groq
from config import GROQ_API_KEY

# ЁЯза Initialize client
client = Groq(api_key=GROQ_API_KEY)

# ЁЯЧгя╕П Predefine system prompt (Hindi agent tone)
# SYSTEM_PROMPT = """
# рддреБрдо рдПрдХ рд╣рд┐рдВрджреА рдореЗрдВ рдЬрд╡рд╛рдм рджреЗрдиреЗ рд╡рд╛рд▓реЗ рдУрд▓рд╛ рдХрд╕реНрдЯрдорд░ рд╕рдкреЛрд░реНрдЯ рдПрдЬреЗрдВрдЯ рд╣реЛред
# рддреБрдореНрд╣рд╛рд░рд╛ рдХрд╛рдо рдбреНрд░рд╛рдЗрд╡рд░ рдХреА рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рдЬрд▓реНрджреА рдФрд░ рд╡рд┐рдирдореНрд░рддрд╛ рд╕реЗ рд╕реБрд▓рдЭрд╛рдирд╛ рд╣реИред
# рдЕрдЧрд░ рдбреНрд░рд╛рдЗрд╡рд░ рдХреЛрдИ рд╕рд╡рд╛рд▓ рдкреВрдЫреЗ рддреЛ рдЙрд╕рдХрд╛ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рдФрд░ рдорджрджрдЧрд╛рд░ рдЙрддреНрддрд░ рджреЛред
# """
SYSTEM_PROMPT = """
рддреБрдо рдПрдХ рд╣рд┐рдВрджреА рдореЗрдВ рдЬрд╡рд╛рдм рджреЗрдиреЗ рд╡рд╛рд▓реЗ рдУрд▓рд╛ рдХрд╕реНрдЯрдорд░ рд╕рдкреЛрд░реНрдЯ рдПрдЬреЗрдВрдЯ рд╣реЛред
рддреБрдореНрд╣рд╛рд░рд╛ рдХрд╛рдо рдбреНрд░рд╛рдЗрд╡рд░ рдХреА рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рдЬрд▓реНрджреА рдФрд░ рд╡рд┐рдирдореНрд░рддрд╛ рд╕реЗ рд╕реБрд▓рдЭрд╛рдирд╛ рд╣реИред
рдЕрдЧрд░ рдбреНрд░рд╛рдЗрд╡рд░ рдХреЛрдИ рд╕рд╡рд╛рд▓ рдкреВрдЫреЗ рддреЛ рдЙрд╕рдХрд╛ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рдФрд░ рдорджрджрдЧрд╛рд░ рдЙрддреНрддрд░ рджреЛред
рдпрд╣ рднреА рдорд╛рдиреЛ рдХрд┐ рдбреНрд░рд╛рдЗрд╡рд░ рдХрд╛ рдЕрдХрд╛рдЙрдВрдЯ рдмреНрд▓реЙрдХ рдирд╣реАрдВ рд╣реБрдЖ рд╣реИред
"""


# ЁЯТм Function to get bot reply
def get_bot_reply(user_input_hindi):
    messages = [
        {"role": "system", "content": SYSTEM_PROMPT},
        {"role": "user", "content": user_input_hindi}
    ]
    
    response = client.chat.completions.create(
        model="llama3-8b-8192",
        messages=messages,
        temperature=0.7
    )

    reply = response.choices[0].message.content.strip()
    return reply

# ЁЯзк Test
if __name__ == "__main__":
    user_input = "рдореИрдВ 2 рдШрдВрдЯреЗ рд╕реЗ рдСрдирд▓рд╛рдЗрди рд╣реВрдБ, рд▓реЗрдХрд┐рди рдХреЛрдИ рд░рд╛рдЗрдб рдирд╣реАрдВ рдорд┐рд▓ рд░рд╣реАред"
    bot_response = get_bot_reply(user_input)
    print("ЁЯдЦ Bot:", bot_response)
